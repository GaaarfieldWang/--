司马懿败了蜀兵，不敢深入追赶，便回师助曹休去取江东。鄱阳太守周鲂见魏兵来犯，一面写信向曹休诈降，一面密报孙权。孙权急命陆逊统兵前往迎敌。

	 

	魏军以为吴军没有防备，被周鲂诱至石亭。吴将朱桓、全琮、徐盛等人引军杀出，魏兵大败。曹休引败兵退去。破了魏军，孙权便修国书，让诸葛亮进兵伐魏。

	 

	诸葛亮得知陆逊破了魏兵，便大会众将，准备出师。此时赵云病故，诸葛亮顿足而哭道：“子龙身故，国家损一栋梁，我失一臂也！”众将无不落泪。后主得知，追忆赵云当年舍命相救，也放声大哭。于是厚葬赵云，设庙堂四时祭奠。

	 

	诸葛亮于是命魏延为前部先锋，直奔陈仓道口。陈仓守将郝昭深通兵法，又有魏主派来的勇将王双相助，斩了蜀兵两员偏将。诸葛亮见久攻不下，就令魏延守住路口，自己领兵从斜谷出祁山。

	 

	诸葛亮来到祁山，姜维献了诈降之计，修书给曹真，言前番不得已而降蜀，如今愿戴罪立功，与曹真里应外合。大将费耀见信道：“诸葛亮多谋，姜维智广，其中恐怕有诈。”费耀于是不让曹真亲去，自己领军马来攻蜀兵。果然中了埋伏，费耀走投无路，自杀身亡。诸葛亮又将计就计，杀败来劫营的孙礼、张虎。曹真只得坚守不出。

	 

	蜀军虽然连胜几阵，无奈转运不便，粮食难以长久接济，诸葛亮只得安排乘胜收兵。诸葛亮派人送密计给魏延。当夜蜀兵拔营起寨，王双得讯，急忙起兵追赶。赶到二十余里，眼看将要赶上，左右忽然报背后营寨火起，王双急忙回马。行至山坡前，忽然一骑从树林中冲出，大喝：“魏延在此！”王双大惊，措手不及，被魏延一刀斩于马下。魏兵担心埋伏，四散逃走。原来魏延依诸葛亮之计，手下只留了三十余骑，出其不意斩了王双。魏延带着三十余骑，往汉中缓缓退去。

	 

	东吴群臣见诸葛亮连胜曹真，便拥孙权即了皇帝位。孙权于是在武昌郊外筑坛祭天，登了帝位，改黄武八年为黄龙元年。立子孙登为太子。孙权登基后，即准备兴兵伐魏。同时派使臣入川修好。诸葛亮让后主派使者祝贺，邀孙权共同起兵。诸葛亮也整顿兵马，准备乘机进兵。此时郝昭病重，诸葛亮便乘魏兵军无主将，夺了陈仓；又命魏延取了散关，自己领大军三出祁山。

	 

	此时曹真病重，曹叡忙命司马懿总督兵马，迎战吴、蜀大军。

	 

	司马懿料定东吴不会轻易出兵，便引兵往长安，专拒诸葛亮。司马懿又想诸葛亮必取陇西，便命郭淮、孙礼二人引军从小路去守武都、阴平两郡。谁知诸葛亮早已让姜维、王平取了两郡。司马懿又命张郃、戴陵乘夜劫营，又被诸葛亮料及，损兵折将。司马懿无奈，只得坚守。

	 

	诸葛亮见司马懿不出，心生一计，命各军拔寨而起，每日后撤三十里。张郃以为蜀兵粮草接济不上，因而退兵，便要追击，司马懿不许。张郃再三请战，又立了军令状，司马懿只得命张郃、戴陵引三万精兵先行，自引大军接应，一路不断令探马飞报各处动静。诸葛亮见魏兵追来，便命王平、张翼引兵埋伏，准备切断魏军归路；又命姜维、廖化各引一军伏在两旁，等司马懿围攻王平、张翼时，不要去救，只需引兵去攻魏军大营。

	 

	张郃遇着张嶷、吴班等将，战了一阵，蜀兵不敌，张郃便引兵追杀。此时正是六月天气，追了五十余里，魏兵汗流浃背，气喘吁吁。诸葛亮在山上把旗一招，王平、张翼杀出，张郃等人被困在垓心。魏兵奋力冲杀，无法冲出。忽然背后锣鼓喧天，司马懿引军攻到，顿时将王平等人围住猛攻。张翼大叫道：“丞相早已算定计策，我们决一死战！”

	 

	姜维在山上探望，见蜀军渐渐抵挡不住，忙与廖化兵分两路去攻。司马懿得探马飞报，大惊失色道：“我料诸葛亮有计，你们不信，勉强追来，误了大事！”连忙引军回救大营。蜀军随后掩杀，魏军死伤无数。

	 

	诸葛亮正要起兵再进，忽然有人来报：张苞连人带马跌入山谷，不幸伤重身死。诸葛亮放声大哭，口中吐血，自此得病，卧床不起。于是传下号令，连夜拔寨班师。

	 

	建兴八年七月，曹真病愈，便与司马懿统领大军四十万伐蜀。诸葛亮此时也已康复，料得不久有连绵大雨，便只命张嶷、王平引军一千守住隘口，蜀兵以逸待劳。魏军到了陈仓，被大雨所困，将士怨声不绝，只得退兵。诸葛亮知道司马懿沿途必设有埋伏，也不追赶，只命魏延等人出箕谷，马岱等人出斜谷，自己亲领大军，令关兴、廖化为先锋，到祁山会合。

	 

	司马懿料想诸葛亮要出祁山，让曹真防备。曹真不信，防备松弛。诸葛亮命五千蜀兵换上魏兵衣甲，令关兴，廖化等人领着，只说是司马都督部下，骗开魏兵寨门。关兴等人一入寨，便在寨中放火。各路蜀军又先后杀到，魏军措手不及，各自逃生。幸好司马懿杀到，救了曹真。曹真又羞又急，再染重病。诸葛亮乘机放回魏军降兵，让他们捎了一封信给曹真。曹真接信一看，信中满是奚落之词，顿时恨气填胸，当晚死于军中。

	 

	诸葛亮气死了曹真，便于次日同司马懿斗阵。司马懿摆了一阵，诸葛亮识得是“混元一气阵”。诸葛亮布了一阵，司马懿认得是“八卦阵”。诸葛亮道：“你既识得此阵，敢来破吗？”司马懿便命张虎、戴陵等人领军从生门杀入阵中。张虎等进了阵，见阵如连城，不禁着慌。左冲右突，都冲不破，全被蜀兵绑了。诸葛亮命人将张虎等人面上涂墨，放回阵去。司马懿大怒，指挥三军，奋力杀来。关兴、姜维各引一军从两面杀出，司马懿急忙退军坚守。

	 

	司马懿见不能胜，便派人到成都散布谣言，说诸葛亮立了大功，早晚要做皇帝。后主着慌，忙下诏宣诸葛亮回成都。诸葛亮仰天长叹，只得回师。司马懿怕有埋伏，也不追赶。

	 

	诸葛亮见了后主，问所召何事，后主无言以对。诸葛亮于是劝谏后主不要听信谗言，又处罚了妄奏的宦官，责备蒋琬、费祎等失职未能规谏天子。诸葛亮又回汉中，准备再次起兵伐魏。