唐高宗时，王孝杰跟随工部尚书刘审礼讨伐吐蕃，在一次战斗中当了俘虏。吐蕃国王见了他，哭着说：“你的相貌很像我的父亲。”他因此被免于一死，不久逃回朝廷。

	高宗死，武后则天称帝。武后因王孝杰被俘后在吐蕃住过一段时间，熟悉那里的情况，就任命他为武威军总管，与左武卫大将军阿史那忠节率军征讨吐蕃，收复了被吐蕃侵占多年的龟兹、于阗、疏勒、碎叶四镇。武后非常高兴，擢升王孝杰为左卫大将军，封男爵，不久又任命他为朔方道总管。后因在一次对吐蕃的战争中战败而被免官。

	后来，契丹人李尽忠、孙万荣叛唐，武后复召王孝杰为清边道总管，率18万兵马去进讨，两军在一山谷中遭遇，他身先士卒，领兵冲出山谷，正待布阵与敌军决一死战，不料后军总管苏宏晖见敌军多而弃甲逃跑。唐军因无后援，战斗中王孝杰又不慎跌入崖谷死亡，乱了阵脚，18万士兵几乎全军覆灭。有个叫张说的人死里逃生，回到长安向武后报告说：“王孝杰英勇杀敌，这次失败与他无关，是由于苏宏晖临阵脱逃。”武后大怒，立即派大臣去幽州斩苏宏晖。那大臣还没有到达幽州，被武后派来的人追赶上，说苏宏晖已在另一次对契丹的战斗中立功赎罪，被武后赦免了死罪。

	后来，“立功赎罪”这一成语，用来指立功以抵偿所犯的罪过。

	成语出自：《旧唐书·王孝杰传》